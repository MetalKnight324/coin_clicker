<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script>
      var coinCount = 0;
      var clickRate = 1;
      var doubleClickRateCost = 10;
      var perSecondRate = 0;
      var lemonadeCost = 100;
      var pizzariaCost = 500;

      function drawCircle() {
        var canvas = document.getElementById("game-board");
        var context = canvas.getContext("2d");
        context.fillStyle = '#00F';
        context.beginPath();
        context.arc(95, 50, 40, 0, 2*Math.PI);
        context.fill();
      }

      function afterCoinCountChange() {
        enablePurchaseButton("clickRateButton", doubleClickRateCost);
        enablePurchaseButton("lemonadeButton", lemonadeCost);
        showStats();
      }

      function handleClick() {
        coinCount += clickRate;
        afterCoinCountChange();
      }

      function purchaseClickRate() {
        clickRate *= 2;
        coinCount = coinCount - doubleClickRateCost;
        doubleClickRateCost = Math.round(doubleClickRateCost * 2.5);
        afterCoinCountChange();
      }

      function purchaseLemonade() {
        perSecondRate += 10;
        coinCount = coinCount - lemonadeCost;
        lemonadeCost = Math.round(lemonadeCost * 2.5)
        afterCoinCountChange();
      }

      function purchasePizzaria() {
        perSecondRate += 65;
        coinCount = coinCount - pizzariaCost;
        pizzariaCost = Math.round(pizzariaCost * 2.5)
        afterCoinCountChange();
      }

      function enablePurchaseButton(buttonId, minimumCoinCount) {
        var button = document.getElementById(buttonId);
        if(coinCount >= minimumCoinCount) {
          button.disabled = false;
        } else {
          button.disabled = true;
        }
      }

      function addPerSecond() {
        console.log("Coins Per Second");
        coinCount = coinCount + perSecondRate;
        afterCoinCountChange();
      }

      function showStats() {
        document.getElementById("coinsCell").innerHTML = coinCount;
        document.getElementById("clickRateCell").innerHTML = clickRate;
        document.getElementById("perSecondCell").innerHTML = perSecondRate;
        document.getElementById("doubleClickRateCell").innerHTML = doubleClickRateCost;
        document.getElementById("lemonadeCostCell").innerHTML = lemonadeCost;
        document.getElementById("pizzariaCostCell").innerHTML = pizzariaCost;
      }

      function init() {
        drawCircle();
        afterCoinCountChange();
        setInterval(addPerSecond, 1000);
      }
    </script>
  </head>
  <body onload="init();">
    <canvas id="game-board" onclick="handleClick();"></canvas>
    <table>
      <tr>
        <th>Coins</th>
        <td id="coinsCell"></td>
      </tr>
      <tr>
        <th>Click rate</th>
        <td id="clickRateCell">1</td>
      </tr>
      <tr>
        <th>Per Second</th>
        <td id="perSecondCell"></td>
      </tr>
      <tr>
        <th>Click Rate x2 Cost</th>
        <td id="doubleClickRateCell"></td>
      </tr>
      <tr>
        <th>Lemonade Stand Cost</th>
        <td id="lemonadeCostCell"></td>
      </tr>
      <tr>
        <th>Pizzaria Cost</th>
        <td id="pizzariaCostCell"></td>
      </tr>
    </table>
    <button id="clickRateButton" onclick="purchaseClickRate();">Click Rate Double</button>
    <button id="lemonadeButton" onclick="purchaseLemonade();">Lemonade Stand</button>
    <button id="pizzariaButton" onclick="purchasePizzaria();">Pizzaria</button>
  </body>
</html>
